<!DOCTYPE html>
<html lang="{{ request.locale.iso_code }}" dir="{{ settings.text_direction }}">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no">
    <meta name="theme-color" content="{{ settings.theme_color | default: '#3182ce' }}">
    
    {%- if page_description -%}
      <meta name="description" content="{{ page_description | escape }}">
    {%- endif -%}

    {%- if canonical_url != blank -%}
      <link rel="canonical" href="{{ canonical_url }}">
    {%- endif -%}
    
    <title>
      {{ page_title }}
      {%- if current_tags %} &ndash; tagged "{{ current_tags | join: ', ' }}"{% endif -%}
      {%- if current_page != 1 %} &ndash; Page {{ current_page }}{% endif -%}
      {%- unless page_title contains shop.name %} &ndash; {{ shop.name }}{% endunless -%}
    </title>

    {%- if settings.favicon != blank -%}
      <link rel="shortcut icon" href="{{ settings.favicon | image_url: width: 32 }}" type="image/png">
    {%- endif -%}

    {{ content_for_header }}

    {%- # Theme stylesheets -%}
    {{ 'base.css' | asset_url | stylesheet_tag }}
    {{ 'theme.css' | asset_url | stylesheet_tag }}
    {{ 'featured-products.css' | asset_url | stylesheet_tag }}
    {{ 'customer.css' | asset_url | stylesheet_tag }}
    
    {%- # Google Fonts -%}
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@600;700&display=swap');
    </style>
    
    {%- # Theme settings CSS variables -%}
    <style>
      :root {
        --primary-color: {{ settings.primary_color | default: '#3182ce' }};
        --primary-text-color: {{ settings.text_color | default: '#2d3748' }};
        --primary-background: {{ settings.background_color | default: '#ffffff' }};
        --header-height: {{ settings.header_height | default: '80px' }};
      }
    </style>
  </head>
  <body>
    {% section 'header' %}
    <main role="main">
      {{ content_for_layout }}
    </main>
    {% section 'footer' %}
    
    <script>
      // Mobile Menu Functionality
      document.addEventListener('DOMContentLoaded', function() {
        const mobileMenuToggle = document.querySelector('.mobile-menu-toggle');
        const mobileNav = document.querySelector('.mobile-nav');
        const mobileCloseBtn = document.querySelector('.mobile-close-btn');
        const body = document.body;
        
        function closeMobileMenu() {
          mobileNav.classList.remove('active');
          mobileMenuToggle.classList.remove('active');
          mobileMenuToggle.setAttribute('aria-expanded', 'false');
          body.style.overflow = '';
        }
        
        function openMobileMenu() {
          mobileNav.classList.add('active');
          mobileMenuToggle.classList.add('active');
          mobileMenuToggle.setAttribute('aria-expanded', 'true');
          body.style.overflow = 'hidden';
        }
        
        if (mobileMenuToggle && mobileNav) {
          mobileMenuToggle.addEventListener('click', function() {
            const isActive = mobileNav.classList.contains('active');
            
            if (isActive) {
              closeMobileMenu();
            } else {
              openMobileMenu();
            }
          });
          
          // Close button functionality
          if (mobileCloseBtn) {
            mobileCloseBtn.addEventListener('click', closeMobileMenu);
          }
          
          // Close menu when clicking on a link
          const mobileNavLinks = mobileNav.querySelectorAll('.mobile-nav-link');
          mobileNavLinks.forEach(link => {
            link.addEventListener('click', closeMobileMenu);
          });
          
          // Close menu when clicking outside
          mobileNav.addEventListener('click', function(e) {
            if (e.target === mobileNav) {
              closeMobileMenu();
            }
          });
          
          // Close menu on escape key
          document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && mobileNav.classList.contains('active')) {
              closeMobileMenu();
            }
          });
        }
      });
    </script>
  </body>
</html>

