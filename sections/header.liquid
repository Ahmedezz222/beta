<header class="site-header" role="banner">
  <div class="container">
    <div class="header-content">
      <h1 class="site-title">
        <a href="/" aria-label="Bike Store - Home">
          <img src="{{ 'logo.png' | asset_url }}" alt="Bike Store Logo" class="site-logo" />
        </a>
      </h1>
      
      <!-- Desktop Navigation -->
      <nav class="site-nav desktop-nav" role="navigation" aria-label="Main navigation">
        <ul class="nav-list">
          <li class="nav-item">
            <a href="/" class="nav-link" aria-current="page">Home</a>
          </li>
          <li class="nav-item">
            <a href="/collections/all" class="nav-link">Products</a>
          </li>
          <li class="nav-item">
            <a href="/pages/cafe-menu" class="nav-link">Cafe Menu</a>
          </li>
          <li class="nav-item">
            <a href="/cart" class="nav-link">
              Cart
              <span class="cart-count" aria-label="Items in cart">{{ cart.item_count }}</span>
            </a>
          </li>
          <li class="nav-item account-nav-item">
            {% if customer %}
              <div class="account-dropdown">
                <button class="account-toggle" aria-label="Account menu" aria-expanded="false">
                  <span class="account-name">{{ customer.first_name | default: customer.email }}</span>
                  <span class="dropdown-arrow">▼</span>
                </button>
                <ul class="account-dropdown-menu">
                  <li><a href="/account" class="dropdown-link">My Account</a></li>
                  <li><a href="/account/orders" class="dropdown-link">Order History</a></li>
                  <li><a href="/account/addresses" class="dropdown-link">Addresses</a></li>
                  <li><a href="/account/logout" class="dropdown-link">Sign Out</a></li>
                </ul>
              </div>
            {% else %}
              <a href="/customers/login" class="nav-link signin-link">
                Sign In
              </a>
            {% endif %}
          </li>
        </ul>
      </nav>
      
      <!-- Mobile Navigation -->
      <div class="mobile-nav-container">
        <button class="mobile-menu-toggle" aria-label="Toggle mobile menu" aria-expanded="false">
          <span class="hamburger-line"></span>
          <span class="hamburger-line"></span>
          <span class="hamburger-line"></span>
        </button>
        
        <nav class="mobile-nav" role="navigation" aria-label="Mobile navigation">
          <button class="mobile-close-btn" aria-label="Close mobile menu">
            <span class="close-icon">×</span>
          </button>
          <ul class="mobile-nav-list">
            <li class="mobile-nav-item">
              <a href="/" class="mobile-nav-link" aria-current="page">Home</a>
            </li>
            <li class="mobile-nav-item">
              <a href="/collections/all" class="mobile-nav-link">Products</a>
            </li>
            <li class="mobile-nav-item">
              <a href="/pages/cafe-menu" class="mobile-nav-link">Cafe Menu</a>
            </li>
            <li class="mobile-nav-item">
              <a href="/cart" class="mobile-nav-link">
                Cart
                <span class="cart-count" aria-label="Items in cart">{{ cart.item_count }}</span>
              </a>
            </li>
            <li class="mobile-nav-item">
              {% if customer %}
                <div class="mobile-account-menu">
                  <div class="account-info">
                    <span class="account-name">{{ customer.first_name | default: customer.email }}</span>
                  </div>
                  <ul class="mobile-account-links">
                    <li><a href="/account" class="mobile-nav-link">My Account</a></li>
                    <li><a href="/account/orders" class="mobile-nav-link">Order History</a></li>
                    <li><a href="/account/addresses" class="mobile-nav-link">Addresses</a></li>
                    <li><a href="/account/logout" class="mobile-nav-link">Sign Out</a></li>
                  </ul>
                </div>
              {% else %}
                <a href="/customers/login" class="mobile-nav-link signin-link">
                  Sign In
                </a>
              {% endif %}
            </li>
          </ul>
        </nav>
      </div>
    </div>
  </div>
</header>

<script>
  // Account dropdown functionality
  document.addEventListener('DOMContentLoaded', function() {
    const accountToggle = document.querySelector('.account-toggle');
    const accountDropdown = document.querySelector('.account-dropdown-menu');
    
    if (accountToggle && accountDropdown) {
      accountToggle.addEventListener('click', function(e) {
        e.preventDefault();
        const isExpanded = this.getAttribute('aria-expanded') === 'true';
        
        if (isExpanded) {
          this.setAttribute('aria-expanded', 'false');
          accountDropdown.classList.remove('active');
        } else {
          this.setAttribute('aria-expanded', 'true');
          accountDropdown.classList.add('active');
        }
      });
      
      // Close dropdown when clicking outside
      document.addEventListener('click', function(e) {
        if (!accountToggle.contains(e.target) && !accountDropdown.contains(e.target)) {
          accountToggle.setAttribute('aria-expanded', 'false');
          accountDropdown.classList.remove('active');
        }
      });
      
      // Close dropdown on escape key
      document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
          accountToggle.setAttribute('aria-expanded', 'false');
          accountDropdown.classList.remove('active');
        }
      });
    }
  });
</script>
